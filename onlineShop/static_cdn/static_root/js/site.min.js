function delay(n,t){let i=0;return function(...r){clearTimeout(i);i=setTimeout(n.bind(this,...r),t||0)}}function beautifyNumber(n){return n.toString().replace(/\.\d+/g,"").replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,",")}function enableSlide(n,t){$(n).addClass("slide");$(document).on("click",n+" .left-arrow",function(){var i=$(n+" .items").scrollLeft();$(n+" .items").animate({scrollLeft:i-t},500)});$(document).on("click",n+" .right-arrow",function(){var i=$(n+" .items").scrollLeft();$(n+" .items").animate({scrollLeft:i+t},500)});$(n+" .body").append('<div class="navigation left-arrow" style="display: none"><span class="fas fa-chevron-left"><\/span><\/div><div class="navigation right-arrow" style="display: none"><span class="fas fa-chevron-right"><\/span><\/div>');$(window).resize(function(){$(n+" .items").hasScrollBar().horizontal?$(n+" .navigation").css("display","block"):$(n+" .navigation").css("display","none")})}function SetLoading(n,t){var i="loading-mask";t&&(i+=" dark-background");n===undefined?$("body").addClass(i):$(n).addClass(i)}function HideLoading(n,t){n===null?($("body").removeClass("loading-mask"),$("body").removeClass("dark-background")):($(n).removeClass("loading-mask"),$(n).removeClass("dark-background"),t&&$([document.documentElement,document.body]).animate({scrollTop:$(n).offset().top},1e3))}function AddInlineLoading(n){n.append('<div class="loader"><div class="icon"><\/div><\/div>')}function RemoveInlineLoading(n){n.find(".loader").remove()}function SubmitForm(n,t,i){var r=$(n).attr("action"),u=new FormData($(n)[0]);$.ajax({url:r,type:i!==undefined?i:"POST",data:u,processData:!1,contentType:!1,success:function(n){t!==undefined?window[t](n):Swal.fire({icon:"success",title:"عملیات با موفقیت انجام شد.",text:n!==undefined&&n.responseText!==undefined?n.responseText:null,confirmButtonText:"بستن"})},error:function(n){Swal.fire({icon:"error",title:"خطا در انجام عملیات",text:n!==undefined&&n.responseText!==undefined?n.responseText:null,confirmButtonText:"بستن"})}})}function InitAddressForm(n){var t={theme:"bootstrap4",language:"fa",dir:"rtl",width:"element"},f=$(".Countries").select2(t),i,r,u;n!==undefined&&f.data("select2").$container.addClass(n);i=$(".Provinces").select2(t);n!==undefined&&i.data("select2").$container.addClass(n);r=t;r.ajax={url:"/Address/GetCitiesForSelect",dataType:"json",data:function(n){return{search:n.term,provinceID:$(".Provinces").val()}}};u=$(".Cities").select2(t);n!==undefined&&u.data("select2").$container.addClass(n);$(".Countries").on("select2:select",function(n){n.params.data.text==="ایران"?($(".Provinces").closest(".row").show(),$(".Cities").closest(".row").show()):($(".Provinces").closest(".row").hide(),$(".Cities").closest(".row").hide(),$("input[name='ContactNumber']").rules("remove"),$("input[name='PostalCode']").rules("remove"))});$(".Provinces").on("select2:select",function(){$(".Cities").val("").trigger("change");$(".SaveAddress").attr("disabled","disabled")});$(".Cities").on("select2:select",function(){$(".SaveAddress").removeAttr("disabled")});$(document).on("change",".ContinueAndSaveAddress",function(){this.checked?$(".DefaultAddress").closest(".checkbox").show():$(".DefaultAddress").closest(".checkbox").hide()});$('.Addresses a[data-toggle="tab"]').on("shown.bs.tab",function(){$($(".Addresses .tab-pane.active").find(".AddressSelect")[0]).prop("checked",!0)});$("input[name='ContactNumber'], input[name='PostalCode']").keyup(function(){var n=$(this).val();n=ReplacePersianDigits(n);$(this).val(n)})}function InitSlider(n,t,i){t===undefined&&(t=!1);i===undefined&&(i=!0);return new Swiper(n,{slidesPerView:2,spaceBetween:40,loop:i,watchOverflow:!0,navigation:{nextEl:".carousel-control-prev",prevEl:".carousel-control-next"},breakpoints:{575:{slidesPerView:t===!0?2:3,spaceBetween:50},768:{slidesPerView:t===!0?2:3,spaceBetween:50},991:{slidesPerView:t===!0?3:4,spaceBetween:60},1200:{slidesPerView:t===!0?4:5,spaceBetween:70}}})}function ReplacePersianDigits(n){persinNum=[/۰/gi,/۱/gi,/۲/gi,/۳/gi,/۴/gi,/۵/gi,/۶/gi,/۷/gi,/۸/gi,/۹/gi];for(var t=0;t<10;t++)n=n.replace(persinNum[t],t);return n}$(function(){jQuery.extend(jQuery.validator.messages,{required:"این فیلد اجباری می باشد",remote:"لطفاً این فیلد را اصلاح نمایید.",email:"لطفا آدرس ایمیل معتبر وارد نمایید",url:"لطفاً آدرس معتبر وارد نمایید.",date:"لطفاً تاریخ معتبر وارد نمایید.",dateISO:"لطفاً تاریخ معتبر در فرمت استاندارد ایزو وارد نمایید.",number:"لطفاً مقدار عددی معتبر وارد نمایید.",digits:"لطفاً تنها از ارقام استفاده نمایید.",creditcard:"لطفاً شماره کارت معتبر وارد نمایید.",equalTo:"لطفاً مجدداً همان مقدار را وارد نمایید.",accept:"لطفاً مقدار با پسوند قابل قبول وارد نمایید.",maxlength:jQuery.validator.format("مقدار وارد شده نباید بیشتر از {0} کاراکتر باشد."),minlength:jQuery.validator.format("مقدار وارد شده نباید کمتر از {0} کاراکتر باشد."),rangelength:jQuery.validator.format("مقدار وارد شده باید بین {0} و {1} کاراکتر باشد."),range:jQuery.validator.format("عدد وارد شده باید بین {0} و {1} باشد."),max:jQuery.validator.format("لطفا مقداری کمتر از  {0} وارد نمایید."),min:jQuery.validator.format("عدد وارد شده باید بزرگ تر یا برابر با {0} باشد.")})});var MinSearchChars=3,TypingTimeout=500,SearchResultCount=20,PreviousSearch="",LastAjaxCall,AddToHistory=!0;$(function(){var n,t,i;$(".limit-height").overlayScrollbars({});n=window.pageYOffset;window.onscroll=function(){var t=window.pageYOffset;n>t?$(".TopBar").css("top","0"):$(".TopBar").css("top","-50px");n=t};$(".SearchToggle").click(function(){$(".navbar .Search").toggle()});$("#SearchBox").on("keyup",delay(function(n){var t=$(this).val();t.length<MinSearchChars||(n.keyCode===13&&(window.location="/Products/?SearchText="+t),t.trim()!==PreviousSearch.trim())&&($(".SearchResult").html("<div class='ResultItems'><\/div>"),$("#SearchBox").addClass("Active"),$(".SearchResult").show(),SetLoading(".SearchResult"),PreviousSearch=t,LastAjaxCall!==undefined&&LastAjaxCall.readyState>0&&LastAjaxCall.readyState<4&&LastAjaxCall.abort(),LastAjaxCall=$.get("/Products/GetProducts/",{SearchText:t,Page:1,PageSize:SearchResultCount}).done(function(n){if(n!==null){var i=$(".SearchResult .ResultItems");n.length>0?(n.forEach(function(n){var t=n.available===!0,r=t?'<div class="Price">'+beautifyNumber(n.price)+' <span class="Rial">ریال<\/span><\/div>':'<div class="Unavailable">ناموجود<\/div>',u='<a href="/Products/details/'+n.id+"/"+n.seoTitle+'" class="HiddenLink SearchResultItem"><div class="SearchProductImage small-image image'+n.id+(t?"":" UnavailableImage")+'"><\/div><div class="Name"><div class="Title">'+n.title+'<\/div><div class="SubTitle">'+n.subTitle+"<\/div>"+r+"<\/div><\/a>";i.append(u);$(".SearchProductImage.image"+n.id).load("/Products/ProductImage",{ImageAddress:n.image,IsBook:n.isBook})}),$(".ResultItems").overlayScrollbars({}),$(".SearchResult").append('<a href="/Products/?SearchText='+t+'"><div class="MoreResults">مشاهده نتایج بیشتر<\/div><\/a>'),n.length>3&&$(".SearchResult .ResultItems").addClass("overflow-fade")):i.html("<div class='col-sm-12 text-center NoResult'><img src='/images/Icons/noresult.svg' alt='بدون نتیجه' /><div class='title'>نتیجه جستجو یافت نشد<\/div><div>لطفا از درست بودن کلمه جستجو شده اطمینان حاصل فرمایید<\/div><\/div>")}HideLoading(".SearchResult")}))},TypingTimeout));$(".AdvancedSearch").click(function(){SetLoading(".AdvancedSearchResult");var n=$(this).closest("form");$.get("/Products/?"+n.serialize(),function(n){$(".AdvancedSearchResult").html(n);HideLoading(".AdvancedSearchResult",!0)})});$(document).on("click",".LoginTrigger",function(){var n=$(this);AddInlineLoading(n);$.get("/Identity/Account/Login?returnUrl="+encodeURIComponent(window.location.pathname+window.location.search+window.location.hash),function(t){var i;$(".LoginTrigger").find("script").remove();i=/<script\b[^>]*>function onRefreshButtonDataAjaxBegin([\s\S]*?)<\/script>/gm.exec(t);$(".LoginTrigger").append(i[0]);RemoveInlineLoading(n);swal.fire({html:t,width:415,customClass:{popup:"p-0"},showConfirmButton:!1,showCloseButton:!0});$(".fa-redo").attr("tabindex","-1")})});$(document).on("click","#logout",function(){AddInlineLoading($(".ManageProfileTrigger"))});$(document).on("keypress","#LoginForm input",function(n){n.keyCode===13&&$(".SubmitLogin").click()});$(document).on("click",".SubmitLogin",function(){var n=$(this).closest("form");$.validator.unobtrusive.parse(n);n.valid()&&($(this).hasClass("NoAjax")?n.submit():$.post(n.attr("action"),n.serialize(),function(n){n.success!==null&&n.success===!0?window.location=n.returnUrl:$("#swal2-content").html(n)}))});$(document).on("submit",".DisableOnSubmit",function(){$(this).find("button[type='submit']").prop("disabled",!0);SetLoading(".DisableOnSubmit")});$(document).on("click",".ManageProfileTrigger",function(){$(".ManageProfile").toggle()});$(document).on("click",".ShoppingCartTrigger",function(){$(".ShoppingCart ul").overlayScrollbars({});$(".ShoppingCart").toggle()});$(document).on("click",".RemoveCartItem",function(){var n=$(this).attr("data-id");swal.fire({text:"آیا از حذف این محصول از سبد خرید اطمینان دارید؟",icon:"warning",showCancelButton:!0,confirmButtonText:"بله",cancelButtonText:"خیر"}).then(t=>{t.value&&$.post("/ShoppingCart/RemoveFromCart",{id:n},function(){$(".ShoppingCartWrapper").load("/ShoppingCart/ReloadShoppingCart",function(){})})})});$(document).on("click",".AddToCart:not(.disabled)",function(){var n=$(this),t;n.addClass("disabled");AddInlineLoading(n);t=$(this).attr("data-id");$.post("/ShoppingCart/AddToCart",{id:t,quantity:1},function(){location.href="/ShoppingCart/ViewCart"})});$(".AddToFavorite").click(function(){var t=$(this).attr("data-id"),n=$(this);$.post("/Products/ToggleFavorite",{productID:t},function(t){t?(n.find(".On").show(),n.find(".Off").hide()):(n.find(".On").hide(),n.find(".Off").show())})});$(".WantToRead").click(function(){var t=$(this).attr("data-id"),n=$(this);$.post("/Products/ToggleWantToRead",{productID:t},function(t){t?(n.find(".On").show(),n.find(".Off").hide()):(n.find(".On").hide(),n.find(".Off").show())})});$(".NotifyWhenAvailable").change(function(){var n=$(this).attr("data-id");$.post("/Products/ToggleNotify",{productID:n})});$("html").click(function(n){$(n.target).closest(".SearchResult").length||($(".SearchResult").hide(),$("#SearchBox").removeClass("Active"));$(n.target).closest(".ShoppingCartWrapper").length||$(".ShoppingCart").hide();$(n.target).closest(".ManageProfileTrigger").length||$(".ManageProfile").hide()});t=100;$(".TopBarButton").mouseenter(function(){var n=$(this);i=setTimeout(function(){n.find(".ProductTypeCategories").addClass("d-flex")},t)});$(".TopBarButton").mouseleave(function(){clearTimeout(i);$(this).find(".ProductTypeCategories").removeClass("d-flex")});$(document).on("click",".ProductTypesTrigger",function(){$(".ProductTypes").toggle()});$(".TopBarButton").mouseenter(function(){$(this).find(".MegaMenu").show()});$(".TopBarButton").mouseleave(function(){$(this).find(".MegaMenu").hide()});$(document).on("click",".WallCategory",function(){var n=$(this).attr("data-category"),t=$(this).attr("data-product-id");SetLoading(".WallPosts");$(".WallPosts").load("/Wall/Index?WallPostCategory="+n+"&ProductID="+t,function(){HideLoading(".WallPosts")})});$(document).on("click",".WriteWallPost",function(){$(".NewWallPost").toggle();$(".NoPost").hide()});$(document).on("click",".NewWallPost .AddPicture",function(){$(".WallPostPicture").toggle()});$(document).on("change",".NewWallPost .AddPoll input",function(){$(".WallPostPoll").toggle()});$(document).on("change",".NewWallPost .AddQuote input",function(){$(".PostDescription .Quote").toggle()});$(document).on("click",".AttachImage",function(){$(".ImageHiddenInput").click()});$(document).on("click",".ImageHiddenInput",function(n){n.stopPropagation()});$(document).on("change",".ImageHiddenInput",function(){if(this.files&&this.files[0]){var n=new FileReader;n.onload=function(n){$(".ImagePreview").find("img").attr("src",n.target.result)};n.readAsDataURL(this.files[0]);$(".NoImagePreview").hide();$(".ImagePreview").show()}});$(document).on("click",".RemoveImage",function(){$(".ImageHiddenInput").val("");$(".ImagePreview").find("img").attr("src","");$(".ImagePreview").hide();$(".NoImagePreview").show()});$(document).on("click",".WallPostWrapper .PostFeedback .Icon.Reply",function(){$(this).closest(".WallPostWrapper").find(".CommentForm").toggle()});$(document).on("click",".PublishPost",function(){$(this).closest("form").submit()});$(document).on("click",".PublishComment",function(){$(this).closest("form").submit()});$(".custom-file-input").on("change",function(){var n=$(this).val().split("\\").pop();$(this).siblings(".custom-file-label").addClass("selected").html(n)});$(".custom-file .btn-reset").on("click",function(){$(this).closest(".custom-file").find(".custom-file-input").val("").trigger("change")});$(".WallPostPoll .AddOption").on("click",function(){parent=$(this).closest(".WallPostPoll").find(".Options");var n=parent.attr("data-last-option-index");n++;parent.append('<div class="Option"><input type="hidden" name="PollItems.Index" value="'+n+'" /><input type="text" name="PollItems['+n+'].Description" class="form-control" /><div class="RemoveOption" title="حذف گزینه"><i class="fa fa-minus"><\/i><\/div><\/div>');parent.attr("data-last-option-index",n)});$(document).on("click",".WallPostPoll .RemoveOption",function(){var t=$(this).closest(".WallPostPoll").find(".Options"),n;$(this).closest(".Option").remove();n=0;t.find(".Option").each(function(){$(this).find("input[type=hidden]").val(n);$(this).find("input[type=text]").attr("name","PollItems["+n+"].Description");n++});t.attr("data-last-option-index",n-1)});$(document).on("click",".PollVote",function(){var t=$(this).attr("data-item-id"),n;t!==null&&(n=$(this).closest(".WallPostWrapper"),SetLoading(n),$.post("/Wall/Vote",{PollOptionID:t},function(t){n.find(".WallPostPoll").html(t);HideLoading(n)}))});$(document).on("mouseenter",".CanRate .Star",function(){var n=$(this).attr("data-rate");$(".Rating .Star").filter(function(){return $(this).attr("data-rate")<=n}).addClass("Hover")});$(document).on("mouseleave",".CanRate .Star",function(){$(".Rating .Star").removeClass("Hover")});$(document).on("click",".FeedbackWrapper .CanRate .Star",function(){var n=$(this).attr("data-product-id"),t=$(this).attr("data-rate"),i;n!==null&&t!==null&&(i=$(this).closest(".FeedbackWrapper"),$.post("/Feedback/Rate",{ProductID:n,Rate:t},function(n){i.html(n)}))});$(document).on("click",".PostFeedback .Like.Feedback",function(){var t=$(this).attr("data-post-id"),i=$(this).attr("data-feedback"),n;t!==null&&i!==null&&(n=$(this).closest(".PostFeedback"),$.post("/Feedback/PostFeedback",{ItemID:t,Feedback:i},function(t){n.find(".LikeCount").text(t.likeCount);t.userLiked?(n.find(".Like .On").show(),n.find(".Like .Off").hide()):(n.find(".Like .On").hide(),n.find(".Like .Off").show())}))});$(document).on("click",".PostFeedback .Report.Feedback",function(){var n=$(this).attr("data-post-id");n!==null&&$.post("/Wall/ReportWallPost",{ID:n},function(){swal.fire({title:"با تشکر از شما",text:"گزارش شما ثبت گردید.",icon:"info",timer:1500,timerProgressBar:!0,confirmButtonText:"بستن"})})});$(".PersianCalendar").pDatepicker({format:"YYYY/MM/DD",autoClose:!0,toolbox:{calendarSwitch:{enabled:!1}},initialValueType:"persian",initialValue:!1})});